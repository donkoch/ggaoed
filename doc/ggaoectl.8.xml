<?xml version="1.0"?>
<?xml-stylesheet href="http://docbook.sourceforge.net/release/xsl/current/manpages/docbook.xsl" type="text/xsl"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
	"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
]>

<refentry id="ggaoectl.8" revision="6 Mar 2009">
    <refentryinfo>
	<author>
	    <personname>
		<firstname>Gábor</firstname>
		<surname>Gombás</surname>
	    </personname>
	    <email>gombasg@sztaki.hu</email>
	</author>
	<date>6 Mar 2009</date>
	<title>ggaoectl</title>
	<productname>ggaoectl</productname>
	<productnumber>@PACKAGE_VERSION@</productnumber>
    </refentryinfo>

    <refmeta>
	<refentrytitle>ggaoectl</refentrytitle>
	<manvolnum>8</manvolnum>
	<refmiscinfo>command-line interface for <command>ggaoed</command></refmiscinfo>
    </refmeta>

    <refnamediv>
	<refname><command>ggaoectl</command></refname>
	<refpurpose>
	    command-line interface for <command>ggaoed</command>
	</refpurpose>
    </refnamediv>

    <refsynopsisdiv>
	<cmdsynopsis>
	    <command>ggaoectl</command>
	    <group>
		<arg choice="plain"><option>-c <replaceable>file</replaceable></option></arg>
		<arg choice="plain"><option>--config <replaceable>file</replaceable></option></arg>
	    </group>
	    <arg choice="plain">reload</arg>
	</cmdsynopsis>
	<cmdsynopsis>
	    <command>ggaoectl</command>
	    <group>
		<arg choice="plain"><option>-c <replaceable>file</replaceable></option></arg>
		<arg choice="plain"><option>--config <replaceable>file</replaceable></option></arg>
	    </group>
	    <arg choice="plain">monitor <arg choice="opt"><replaceable>interval</replaceable></arg> <arg choice="opt" rep="repeat"><replaceable>name</replaceable></arg></arg>
	</cmdsynopsis>
	<cmdsynopsis>
	    <command>ggaoectl</command>
	    <group>
		<arg choice="plain"><option>-c <replaceable>file</replaceable></option></arg>
		<arg choice="plain"><option>--config <replaceable>file</replaceable></option></arg>
	    </group>
	    <arg choice="plain">stats <arg choice="opt" rep="repeat"><replaceable>name</replaceable></arg></arg>
	</cmdsynopsis>
	<cmdsynopsis>
	    <command>ggaoectl</command>
	    <group>
		<arg choice="plain"><option>-c <replaceable>file</replaceable></option></arg>
		<arg choice="plain"><option>--config <replaceable>file</replaceable></option></arg>
	    </group>
	    <arg choice="plain">show-config <arg choice="opt" rep="repeat"><replaceable>name</replaceable></arg></arg>
	</cmdsynopsis>
	<cmdsynopsis>
	    <command>ggaoectl</command>
	    <group>
		<arg choice="plain"><option>-c <replaceable>file</replaceable></option></arg>
		<arg choice="plain"><option>--config <replaceable>file</replaceable></option></arg>
	    </group>
	    <arg choice="plain">show-macmask <arg choice="opt" rep="repeat"><replaceable>name</replaceable></arg></arg>
	</cmdsynopsis>
	<cmdsynopsis>
	    <command>ggaoectl</command>
	    <group>
		<arg choice="plain"><option>-c <replaceable>file</replaceable></option></arg>
		<arg choice="plain"><option>--config <replaceable>file</replaceable></option></arg>
	    </group>
	    <arg choice="plain">show-reserve <arg choice="opt" rep="repeat"><replaceable>name</replaceable></arg></arg>
	</cmdsynopsis>
	<cmdsynopsis>
	    <command>ggaoectl</command>
	    <group>
		<arg choice="plain"><option>-c <replaceable>file</replaceable></option></arg>
		<arg choice="plain"><option>--config <replaceable>file</replaceable></option></arg>
	    </group>
	    <arg choice="plain">clear-stats <arg choice="opt" rep="repeat"><replaceable>name</replaceable></arg></arg>
	</cmdsynopsis>
	<cmdsynopsis>
	    <command>ggaoectl</command>
	    <group>
		<arg choice="plain"><option>-c <replaceable>file</replaceable></option></arg>
		<arg choice="plain"><option>--config <replaceable>file</replaceable></option></arg>
	    </group>
	    <arg choice="plain">clear-config <arg choice="plain" rep="repeat"><replaceable>name</replaceable></arg></arg>
	</cmdsynopsis>
	<cmdsynopsis>
	    <command>ggaoectl</command>
	    <group>
		<arg choice="plain"><option>-c <replaceable>file</replaceable></option></arg>
		<arg choice="plain"><option>--config <replaceable>file</replaceable></option></arg>
	    </group>
	    <arg choice="plain">clear-macmask <arg choice="plain" rep="repeat"><replaceable>name</replaceable></arg></arg>
	</cmdsynopsis>
	<cmdsynopsis>
	    <command>ggaoectl</command>
	    <group>
		<arg choice="plain"><option>-c <replaceable>file</replaceable></option></arg>
		<arg choice="plain"><option>--config <replaceable>file</replaceable></option></arg>
	    </group>
	    <arg choice="plain">clear-reserve <arg choice="plain" rep="repeat"><replaceable>name</replaceable></arg></arg>
	</cmdsynopsis>
	<cmdsynopsis>
	    <command>ggaoectl</command>
	    <group choice="req">
		<arg choice="plain"><option>-h</option></arg>
		<arg choice="plain"><option>--help</option></arg>
	    </group>
	</cmdsynopsis>
    </refsynopsisdiv>

    <refsect1>
	<title>DESCRIPTION</title>
	<para>
	    <command>ggaoectl</command> is an AoE target. It allows exporting
	    files and block devices over the network using the ATA over
	    Ethernet protocol.
	</para>
    </refsect1>

    <refsect1>
	<title>OPTIONS</title>
	<variablelist>
	    <varlistentry>
		<term>
		    <group choice="plain">
			<arg choice="plain"><option>-c <replaceable>file</replaceable></option></arg>
			<arg choice="plain"><option>--config <replaceable>file</replaceable></option></arg>
		    </group>
		</term>
		<listitem>
		    <para>
			Use the specified config file instead of
			<filename>@sysconfdir@/ggaoed.conf</filename>. The location of
			the daemon's control socket is read from this config file.
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <group choice="plain">
			<arg choice="plain"><option>-h</option></arg>
			<arg choice="plain"><option>--help</option></arg>
		    </group>
		</term>
		<listitem>
		    <para>
			Show a short help text.
		    </para>
		</listitem>
	    </varlistentry>
	</variablelist>
    </refsect1>

    <refsect1>
	<title>COMMANDS</title>
	<variablelist>
	    <varlistentry>
		<term>
		    <arg choice="plain">reload</arg>
		</term>
		<listitem>
		    <para>
			 Tell <command>ggaoed</command> to reload its configuration file.
			 This is the same as sending a <literal>SIGHUP</literal> signal
			 to <command>ggaoed</command>.
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">monitor <arg choice="opt"><replaceable>interval</replaceable></arg> <arg choice="opt" rep="repeat"><replaceable>name</replaceable></arg></arg>
		</term>
		<listitem>
		    <para>
			Monitor the performance of devices and/or network interfaces.
			If no <arg choice="plain"><replaceable>name</replaceable></arg>
			parameters are given, all devices and interfaces are monitored;
			otherwise only the named ones are monitored. If the firt argument
			is a number, it is interpreted as the interval to wait between
			measurements.
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">stats <arg choice="opt" rep="repeat"><replaceable>name</replaceable></arg></arg>
		</term>
		<listitem>
		    <para>
			Dump the detailed statistics for the specified devices and/or network
			interfaces. If no <arg choice="plain"><replaceable>name</replaceable></arg>
			parameters are given, all devices and interfaces are dumped.
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">show-config <arg choice="opt" rep="repeat"><replaceable>name</replaceable></arg></arg>
		</term>
		<listitem>
		    <para>
			Dump the AoE configuration info for the specified devices. The
			AoE configuration info is an arbitrary block of data with a maximum
			length of 1024. AoE initiators can manipulate and query this
			data according their needs. This command dumps the current value
			in both hexadecimal and string format.
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">show-macmask <arg choice="opt" rep="repeat"><replaceable>name</replaceable></arg></arg>
		</term>
		<listitem>
		    <para>
			Dump the AoE MAC Mask list for the specified devices. The AoE
			MAC Mask list is the dynamic equivalent of ggaoed's ACLs. This
			command shows the MAC addresses currently on the list.
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">show-reserve <arg choice="opt" rep="repeat"><replaceable>name</replaceable></arg></arg>
		</term>
		<listitem>
		    <para>
			Dump the AoE Reserve/Release list for the specified devices.
			The AoE Reserve/Release list can be used by Windows clients to
			provide cluster fencing support. This command shows the MAC
			addresses that are on the reserve list.
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">clear-stats <arg choice="opt" rep="repeat"><replaceable>name</replaceable></arg></arg>
		</term>
		<listitem>
		    <para>
			Clear the device/interface statistics by setting all the counters
			to zero.
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">clear-config <arg choice="plain" rep="repeat"><replaceable>name</replaceable></arg></arg>
		</term>
		<listitem>
		    <para>
			Clear the AoE configuration space of the specified device(s).
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">clear-macmask <arg choice="plain" rep="repeat"><replaceable>name</replaceable></arg></arg>
		</term>
		<listitem>
		    <para>
			Clear the AoE MAC Mask list of the specified device(s).
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">clear-reserve <arg choice="plain" rep="repeat"><replaceable>name</replaceable></arg></arg>
		</term>
		<listitem>
		    <para>
			Clear the AoE Reserve list of the specified device(s).
		    </para>
		</listitem>
	    </varlistentry>
	</variablelist>
	<para>
	    For all the commands mentioned above, <replaceable>name</replaceable> can
	    also contain glob-like metacharacters; if so, make sure to properly escape
	    them from the shell.
	</para>
    </refsect1>

    <refsect1>
	<title>MONITOR OUTPUT</title>
	<para>
	    The <arg choice="plain">monitor</arg> command produces the following
	    output fields for disks:
	</para>
	<variablelist>
	    <varlistentry>
		<term>
		    <arg choice="plain">rrqm/s</arg>
		</term>
		<listitem>
		    <para>
			Number of read requests per second
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">rkB/s</arg>
		</term>
		<listitem>
		    <para>
			Kilobytes read per second
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">wrqm/s</arg>
		</term>
		<listitem>
		    <para>
			Number of write requests per second
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">wkB/s</arg>
		</term>
		<listitem>
		    <para>
			Kilobytes written per second
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">oth</arg>
		</term>
		<listitem>
		    <para>
			Number of other (not read/write) requests
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">avgqsz</arg>
		</term>
		<listitem>
		    <para>
			Average queue length
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">qs</arg>
		</term>
		<listitem>
		    <para>
			Number of queue stalls
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">qf</arg>
		</term>
		<listitem>
		    <para>
			Number of times the queue was full
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">ae</arg>
		</term>
		<listitem>
		    <para>
			Number of ATA errors
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">pe</arg>
		</term>
		<listitem>
		    <para>
			Number of AoE command errors
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">svctm</arg>
		</term>
		<listitem>
		    <para>
			Average request servicing time in milliseconds
		    </para>
		</listitem>
	    </varlistentry>
	</variablelist>
	<para>
	    For network interfaces, the following fields are printed:
	</para>
	<variablelist>
	    <varlistentry>
		<term>
		    <arg choice="plain">rrqm/s</arg>
		</term>
		<listitem>
		    <para>
			Number of read requests per second
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">rkB/s</arg>
		</term>
		<listitem>
		    <para>
			Kilobytes read per second
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">wrqm/s</arg>
		</term>
		<listitem>
		    <para>
			Number of write requests per second
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">wkB/s</arg>
		</term>
		<listitem>
		    <para>
			Kilobytes written per second
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">drp</arg>
		</term>
		<listitem>
		    <para>
			Number of packets dropped by the network stack
		    </para>
		</listitem>
	    </varlistentry>
	    <varlistentry>
		<term>
		    <arg choice="plain">avgr</arg>
		</term>
		<listitem>
		    <para>
			Average number of packets processed in a batch
		    </para>
		</listitem>
	    </varlistentry>
	</variablelist>
    </refsect1>

    <refsect1>
	<title>FILES</title>
	<para>
	    <filename>@sysconfdir@/ggaoed.conf</filename>
	</para>
    </refsect1>

    <refsect1>
	<title>SEE ALSO</title>
	<para>
	    AoEr11 (ATA over Ethernet, revision 11),
	    <citerefentry><refentrytitle>ggaoed</refentrytitle><manvolnum>8</manvolnum></citerefentry>,
	    <citerefentry><refentrytitle>ggaoed.conf</refentrytitle><manvolnum>5</manvolnum></citerefentry>
	</para>
    </refsect1>

</refentry>
<!-- vim: set ai sw=4: -->
